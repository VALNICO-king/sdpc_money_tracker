<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Contributor Dashboard</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/recharts/2.8.0/Recharts.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        darkMode: 'media',
        theme: {
          extend: {
            colors: {
              'brand-gold': '#FFD700',
              'brand-silver': '#C0C0C0',
              'brand-bronze': '#CD7F32',
            }
          }
        }
      }
    </script>
</head>
<body class="bg-gray-100 dark:bg-gray-900 transition-colors duration-300">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo, useCallback } = React;
        const { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } = Recharts;

        // Utility function to get today's date
        const getTodayString = () => {
            const today = new Date();
            return today.toISOString().split('T')[0];
        };

        // Header Component
        const Header = () => (
            <header className="bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700">
                <div className="container mx-auto px-4 sm:px-6 lg:px-8 py-4">
                    <h1 className="text-3xl font-bold text-gray-900 dark:text-white">
                        Contributor Dashboard
                    </h1>
                    <p className="text-gray-600 dark:text-gray-400 mt-1">
                        Track contributions and manage activities
                    </p>
                </div>
            </header>
        );

        // Contribution Graph Component
        const ContributionGraph = ({ data }) => (
            <div className="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6">
                <h2 className="text-xl font-semibold mb-4 text-gray-700 dark:text-gray-300">
                    Contribution Overview
                </h2>
                <div className="h-64">
                    <ResponsiveContainer width="100%" height="100%">
                        <BarChart data={data} margin={{ top: 20, right: 30, left: 20, bottom: 5 }}>
                            <CartesianGrid strokeDasharray="3 3" className="opacity-30" />
                            <XAxis 
                                dataKey="name" 
                                tick={{ fill: 'currentColor' }}
                                className="text-gray-600 dark:text-gray-400"
                            />
                            <YAxis 
                                tick={{ fill: 'currentColor' }}
                                className="text-gray-600 dark:text-gray-400"
                            />
                            <Tooltip 
                                contentStyle={{
                                    backgroundColor: 'var(--tooltip-bg)',
                                    border: '1px solid var(--tooltip-border)',
                                    borderRadius: '6px'
                                }}
                                formatter={(value) => [`$${value.toLocaleString()}`, 'Amount']}
                            />
                            <Bar 
                                dataKey="amount" 
                                fill="#3B82F6"
                                radius={[2, 2, 0, 0]}
                            />
                        </BarChart>
                    </ResponsiveContainer>
                </div>
            </div>
        );

        // Calendar Component
        const Calendar = ({ activities, onAddActivity, onDeleteActivity }) => {
            const [selectedDate, setSelectedDate] = useState(getTodayString());
            const [newActivity, setNewActivity] = useState('');

            const handleAddActivity = (e) => {
                e.preventDefault();
                if (newActivity.trim() && selectedDate) {
                    onAddActivity(selectedDate, newActivity.trim());
                    setNewActivity('');
                }
            };

            const activitiesForDate = activities.filter(activity => activity.date === selectedDate);

            return (
                <div className="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6">
                    <h2 className="text-xl font-semibold mb-4 text-gray-700 dark:text-gray-300">
                        Activity Calendar
                    </h2>
                    
                    <div className="mb-4">
                        <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                            Select Date
                        </label>
                        <input
                            type="date"
                            value={selectedDate}
                            onChange={(e) => setSelectedDate(e.target.value)}
                            className="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"
                        />
                    </div>

                    <form onSubmit={handleAddActivity} className="mb-4">
                        <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                            Add Activity
                        </label>
                        <div className="flex gap-2">
                            <input
                                type="text"
                                value={newActivity}
                                onChange={(e) => setNewActivity(e.target.value)}
                                placeholder="Enter activity description"
                                className="flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"
                            />
                            <button
                                type="submit"
                                className="px-4 py-2 bg-blue-600 text-white font-medium rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors"
                            >
                                Add
                            </button>
                        </div>
                    </form>

                    <div>
                        <h3 className="font-medium text-gray-700 dark:text-gray-300 mb-2">
                            Activities for {selectedDate}
                        </h3>
                        {activitiesForDate.length === 0 ? (
                            <p className="text-gray-500 dark:text-gray-400 text-sm">No activities for this date</p>
                        ) : (
                            <ul className="space-y-2">
                                {activitiesForDate.map((activity) => (
                                    <li
                                        key={activity.id}
                                        className="flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-700 rounded"
                                    >
                                        <span className="text-sm text-gray-700 dark:text-gray-300">
                                            {activity.description}
                                        </span>
                                        <button
                                            onClick={() => onDeleteActivity(activity.id)}
                                            className="text-red-600 hover:text-red-800 text-sm"
                                        >
                                            Delete
                                        </button>
                                    </li>
                                ))}
                            </ul>
                        )}
                    </div>
                </div>
            );
        };

        // Contribution Form Component
        const ContributionForm = ({ onAddContribution }) => {
            const [name, setName] = useState('');
            const [amount, setAmount] = useState('');

            const handleSubmit = (e) => {
                e.preventDefault();
                if (name.trim() && amount && !isNaN(parseFloat(amount))) {
                    onAddContribution(name.trim(), parseFloat(amount));
                    setName('');
                    setAmount('');
                }
            };

            return (
                <div className="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6">
                    <form onSubmit={handleSubmit} className="space-y-4">
                        <div>
                            <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                Contributor Name
                            </label>
                            <input
                                type="text"
                                value={name}
                                onChange={(e) => setName(e.target.value)}
                                placeholder="Enter contributor name"
                                className="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"
                                required
                            />
                        </div>
                        <div>
                            <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                Amount ($)
                            </label>
                            <input
                                type="number"
                                value={amount}
                                onChange={(e) => setAmount(e.target.value)}
                                placeholder="Enter amount"
                                min="0"
                                step="0.01"
                                className="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"
                                required
                            />
                        </div>
                        <button
                            type="submit"
                            className="w-full bg-blue-600 text-white font-medium py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors"
                        >
                            Add Contribution
                        </button>
                    </form>
                </div>
            );
        };

        // Contribution List Component
        const ContributionList = ({ contributions, onDeleteContribution }) => (
            <div className="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6">
                {contributions.length === 0 ? (
                    <p className="text-gray-500 dark:text-gray-400">No contributions yet</p>
                ) : (
                    <div className="space-y-3">
                        {contributions.map((contribution, index) => (
                            <div
                                key={contribution.id}
                                className="flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg"
                            >
                                <div className="flex items-center space-x-3">
                                    <div className={`w-8 h-8 rounded-full flex items-center justify-center text-white font-bold ${
                                        index === 0 ? 'bg-yellow-500' : 
                                        index === 1 ? 'bg-gray-400' : 
                                        index === 2 ? 'bg-yellow-600' : 'bg-blue-500'
                                    }`}>
                                        {index + 1}
                                    </div>
                                    <div>
                                        <h3 className="font-medium text-gray-900 dark:text-white">
                                            {contribution.name}
                                        </h3>
                                        <p className="text-lg font-semibold text-green-600 dark:text-green-400">
                                            ${contribution.amount.toLocaleString()}
                                        </p>
                                    </div>
                                </div>
                                <button
                                    onClick={() => onDeleteContribution(contribution.id)}
                                    className="text-red-600 hover:text-red-800 font-medium"
                                >
                                    Delete
                                </button>
                            </div>
                        ))}
                    </div>
                )}
            </div>
        );

        // Main App Component
        const App = () => {
            const [contributions, setContributions] = useState([
                { id: '1', name: 'Alice', amount: 5000 },
                { id: '2', name: 'Bob', amount: 2500 },
                { id: '3', name: 'Charlie', amount: 7500 },
                { id: '4', name: 'Diana', amount: 3000 },
            ]);

            const [activities, setActivities] = useState([
                { id: 'a1', date: getTodayString(), description: 'Team sync-up call' },
                { id: 'a2', date: getTodayString(), description: 'Submit Q3 report' },
                { 
                    id: 'a3', 
                    date: new Date(Date.now() + 2 * 24 * 60 * 60 * 1000).toISOString().split('T')[0], 
                    description: 'Project kickoff' 
                },
            ]);

            const addContribution = useCallback((name, amount) => {
                const newContribution = {
                    id: Date.now().toString(),
                    name,
                    amount,
                };
                setContributions(prev => [...prev, newContribution]);
            }, []);

            const deleteContribution = useCallback((id) => {
                setContributions(prev => prev.filter(c => c.id !== id));
            }, []);

            const addActivity = useCallback((date, description) => {
                const newActivity = {
                    id: Date.now().toString(),
                    date,
                    description,
                };
                setActivities(prev => [...prev, newActivity]);
            }, []);

            const deleteActivity = useCallback((id) => {
                setActivities(prev => prev.filter(a => a.id !== id));
            }, []);

            const sortedContributions = useMemo(() => {
                return [...contributions].sort((a, b) => b.amount - a.amount);
            }, [contributions]);

            return (
                <div className="min-h-screen bg-gray-100 dark:bg-gray-900 text-gray-800 dark:text-gray-200">
                    <Header />
                    <main className="container mx-auto p-4 sm:p-6 lg:p-8">
                        <div className="grid grid-cols-1 lg:grid-cols-5 gap-8 mb-8">
                            <div className="lg:col-span-3">
                                <ContributionGraph data={sortedContributions} />
                            </div>
                            <div className="lg:col-span-2">
                                <Calendar 
                                    activities={activities} 
                                    onAddActivity={addActivity} 
                                    onDeleteActivity={deleteActivity} 
                                />
                            </div>
                        </div>
                        
                        <div className="grid grid-cols-1 md:grid-cols-5 gap-8">
                            <div className="md:col-span-2">
                                <h2 className="text-2xl font-semibold mb-4 text-gray-700 dark:text-gray-300">
                                    Add New Contribution
                                </h2>
                                <ContributionForm onAddContribution={addContribution} />
                            </div>
                            <div className="md:col-span-3">
                                <h2 className="text-2xl font-semibold mb-4 text-gray-700 dark:text-gray-300">
                                    Contributor Rankings
                                </h2>
                                <ContributionList 
                                    contributions={sortedContributions} 
                                    onDeleteContribution={deleteContribution} 
                                />
                            </div>
                        </div>
                    </main>
                </div>
            );
        };

        // Render the app
        ReactDOM.render(<App />, document.getElementById('root'));
    </script>

    <style>
        :root {
            --tooltip-bg: #374151;
            --tooltip-border: #4B5563;
        }
        
        @media (prefers-color-scheme: dark) {
            :root {
                --tooltip-bg: #1F2937;
                --tooltip-border: #374151;
            }
        }
    </style>
</body>
</html>
